<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Сфират а-Омер: Самоанализ и Рост</title>
    <style>
        :root {
            --color-primary: #4a417a; /* Глубокий сине-фиолетовый */
            --color-secondary: #fcd581; /* Мягкий золотистый */
            --color-background: #fcfcfc; /* Почти белый фон */
            --color-text: #333333;
            --color-accent: #7c73a8; /* Более светлый фиолетовый */
            --color-white: #ffffff;
            --font-serif: 'Georgia', serif;
            --font-sans: 'Verdana', sans-serif;
        }

        body {
            font-family: var(--font-sans);
            background-color: var(--color-background);
            color: var(--color-text);
            line-height: 1.6;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            width: 90%;
            max-width: 850px;
            margin: 40px auto;
            padding: 30px;
            background: var(--color-white);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            border-radius: 10px;
        }

        h1 {
            font-family: var(--font-serif);
            color: var(--color-primary);
            text-align: center;
            margin-bottom: 5px;
            font-size: 2.5em;
        }

        h2 {
            color: var(--color-primary);
            border-bottom: 2px solid var(--color-secondary);
            padding-bottom: 5px;
            margin-top: 30px;
            font-size: 1.8em;
        }

        .intro {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.1em;
        }

        .quote {
            font-style: italic;
            border-left: 4px solid var(--color-accent);
            padding: 10px 20px;
            margin: 20px 0;
            background: #f9f9ff; /* Очень светлый фон для цитаты */
        }
        
        blockquote.quote {
             margin-left: 0;
             margin-right: 0;
        }

        #progress-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        #progress-fill {
            height: 100%;
            width: 0%;
            background: var(--color-accent);
            border-radius: 4px;
            transition: width 0.4s ease-out;
        }

        #current-step-display {
            font-size: 1.2em;
            color: var(--color-primary);
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }

        .step-button {
            background-color: var(--color-primary);
            color: var(--color-white);
            border: none;
            padding: 12px 25px;
            margin: 15px 0;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            transition: background-color 0.3s;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            display: block; 
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
        }

        .step-button:hover {
            background-color: var(--color-accent);
        }

        /* Стиль для блока, который будет обновляться */
        #daily-midah-content {
            background: var(--color-white);
            border: 1px solid #eee;
            border-left: 5px solid var(--color-secondary);
            padding: 20px;
            margin-top: 20px;
            border-radius: 8px;
            min-height: 150px; 
        }
        
        #daily-midah-content h3 {
            color: var(--color-primary);
            font-size: 1.4em;
            margin-top: 0;
        }
        
        .reflection-area {
            background: #fafafa;
            border-top: 1px solid #eee;
            padding: 15px;
            margin-top: 15px;
            border-radius: 4px;
        }
        
        .reflection-area p {
            font-weight: normal;
        }
        
        .shavuot-section .quote-source {
            display: block;
            text-align: right;
            margin-top: 5px;
            font-size: 0.9em;
            font-weight: bold;
            color: var(--color-primary);
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Сфират а-Омер: 49 Встреч с Собой</h1>

    <div class="intro">
        <p><strong>Сфират а-Омер</strong> — это лестница из 49 ступеней, ведущая к лучшей версии себя. 49 дней — 49 встреч с собой.</p>
        <p>Это время духовной работы над **мидот (качествами)**, следуя принципам **Мусар (духовное движение этики и морали, сосредоточенное на самоанализе, осознанности и медитации)**.</p>
    </div>

    <div class="quote">
        <p>“Человек может выучить весь Талмуд — и остаться рабом своей гордыни. Истинное же знание Торы проявляется не в том, что ты знаешь, а в том, кем ты стал.”</p>
    </div>
    
    <h2>Ежедневная Работа: Аводат а-Мидот (Работа над собой)</h2>

    <div id="progress-bar"><div id="progress-fill"></div></div>

    <div id="current-step-display">Начните восхождение! Нажмите кнопку, чтобы открыть первую Миду.</div>

    <button class="step-button" id="next-step-button" onclick="nextStep()">Подняться на Ступень 1</button>

    <div id="daily-midah-content">
        </div>
    
    <div class="shavuot-section">
        <h2>Праздник Дарования Торы (Шавуот)</h2>
        <p>Почему праздник Шавуот называется **Хаг Матан Тора (Дарование Торы)**, а не «Получение Торы»?</p>
        
        <p>Ведь на Синае народ сказал: **“Наасе ве-нишма” (Будем исполнять и слушать)** — полное принятие.</p>
        
        <p>Но мудрецы объясняют:</p>
        <p>Тора была дана однажды — но принимается заново каждым поколением и каждым сердцем.</p>
        
        <blockquote class="quote">
            <p>“Синай учит нас, что истина не навязывается человеку. Он должен выйти ей навстречу.” Даже на Синае Тора не могла быть получена насильно.</p>
            <span class="quote-source">— Рав Йосеф Дов Соловейчик</span>
        </blockquote>
        
        <p>Дарование — акт Творца. Получение — выбор человека, требующий зрелости и свободы.</p>
        
        <p>Хасидизм учит:</p>
        <p>“Каждый год в Шавуот Тора заново нисходит в духовных мирах.” Но принять её можно лишь по мере **аводат а-мидот (работы над собой)**.</p>
        
        <blockquote class="quote">
            <p>“Каждая душа на Синае слышала свой особый разговор.”</p>
            <span class="quote-source">— Рав Кук</span>
        </blockquote>
        <p>Дар один — но Тору каждый получает по-своему. И потому мы празднуем — дар. Чтобы быть готовыми — принять.</p>
    </div>

</div>

<script>
    const midot = [
        { name: "Хесед", meaning: "Милосердие", description: "Щедрость души и любовь без условий.", question: "Кому сегодня я могу дать больше, чем от меня ожидали? Где моё милосердие было ограничено страхом?" },
        { name: "Гвура", meaning: "Сдержанность", description: "Дисциплина. Умение сказать «нет» — не из страха, а из ясности и уважения.", question: "Где я сегодня потерял контроль над словом или эмоцией? Какое одно «нет» принесёт мне больше ясности?" },
        { name: "Тиферет", meaning: "Гармония", description: "Сострадание. Место, где соединяются любовь и сила.", question: "Где я был слишком мягок, а где слишком суров? Как найти золотую середину в общении с собой?" },
        { name: "Нецах", meaning: "Упорство", description: "Стойкость и устремлённость. Решимость продолжать, когда трудно.", question: "Когда мне захотелось сдаться? Какое маленькое действие я могу сделать сейчас, чтобы проявить стойкость?" },
        { name: "Ход", meaning: "Смирение", description: "Скромность и принятие. Сила уступить. Признание, что не всё зависит от меня. Ход — это скромность света, который не требует сцены.", question: "Какую ситуацию или мнение я сегодня не смог принять? Где мне нужно было отойти в сторону, но я боролся?" },
        { name: "Йесод", meaning: "Связь", description: "Близость и надёжность. Способность быть близким, не теряя себя.", question: "Насколько надёжным я был сегодня для близкого человека? Что мешает мне быть полностью присутствующим в отношениях?" },
        { name: "Малхут", meaning: "Царственность", description: "Достоинство. Быть вместилищем света. Молчаливым. Сильным. Присутствующим.", question: "Что сегодня заставило меня почувствовать своё достоинство? Как я проявил свою внутреннюю «царственность» в обычной ситуации?" }
    ];

    let currentStep = 0;
    const midahContentDiv = document.getElementById('daily-midah-content');
    const stepDisplay = document.getElementById('current-step-display');
    const progressBarFill = document.getElementById('progress-fill');
    const nextStepButton = document.getElementById('next-step-button');
    const totalSteps = 49; 

    // Функция для обновления прогресса
    function updateProgress(step) {
        const percentage = (step / totalSteps) * 100;
        progressBarFill.style.width = `${percentage}%`;
    }

    function generateStepContent(stepIndex) {
        const weekMidahIndex = Math.floor(stepIndex / 7);
        const dayMidahIndex = stepIndex % 7;
        
        const dayNumber = stepIndex + 1;
        
        const weekMidah = midot[weekMidahIndex];
        const dayMidah = midot[dayMidahIndex];

        return `
            <h3>Ступень ${dayNumber} из ${totalSteps}: ${dayMidah.name} в аспекте ${weekMidah.name}</h3>
            
            <p><strong>Мида Недели (Фокус):</strong> ${weekMidah.name} (${weekMidah.meaning})</p>
            <p><strong>Мида Дня:</strong> ${dayMidah.name} (${dayMidah.meaning}).</p>
            <p><strong>Суть работы:</strong> ${dayMidah.description}</p>
            
            <div class="reflection-area">
                <p><strong>Вопрос для Мусар (самоанализ):</strong></p>
                <p>${dayMidah.question}</p>
            </div>
        `;
    }

    function nextStep() {
        if (currentStep < totalSteps) {
            
            // 1. Обновление содержимого (статично)
            midahContentDiv.innerHTML = generateStepContent(currentStep);

            // 2. Обновление текста, прогресса и кнопки
            const weekMidah = midot[Math.floor(currentStep / 7)].name;
            const dayMidah = midot[currentStep % 7].name;
            
            stepDisplay.textContent = `Текущая Ступень ${currentStep + 1} — ${dayMidah} в аспекте ${weekMidah}`;
            
            const nextStepNumber = currentStep + 2;
            if (nextStepNumber <= totalSteps) {
                nextStepButton.textContent = `Подняться на Ступень ${nextStepNumber}`;
            } else {
                 nextStepButton.textContent = `Завершить Восхождение`;
            }

            updateProgress(currentStep + 1);

            currentStep++;

        } else {
            // Конец Сфират а-Омер
            midahContentDiv.innerHTML = `<h3>Завершение Восхождения</h3>
                <p>Вы завершили все 49 ступеней Аводат а-Мидот. Ваш сосуд души подготовлен к принятию света Торы. Хаг Матан Тора (Праздник Дарования Торы)!</p>`;
            stepDisplay.textContent = `49/49. Работа завершена.`;
            nextStepButton.textContent = "Начать новый цикл Сфират а-Омер";
            nextStepButton.onclick = () => { 
                currentStep = 0; 
                midahContentDiv.innerHTML = ""; // Очистить контент
                updateProgress(0);
                nextStepButton.onclick = nextStep; // Восстановить основную функцию
                nextStep(); // Начать с первой ступени
            };
        }
    }
    
    // Запускаем первый шаг при загрузке страницы, чтобы увидеть "Ступень 1"
    nextStep();
</script>

</body>
</html>
